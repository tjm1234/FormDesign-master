/* =========================================================
 * bootstrap-datetimepicker.js
 * =========================================================
 * Copyright 2012 Stefan Petre
 * Improvements by Andrew Rowls
 * Improvements by SÃ©bastien Malot
 * Improvements by Yun Lai
 * Project URL : http://www.malot.fr/bootstrap-datetimepicker
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */!function(f){function r(){return new Date(Date.UTC.apply(Date,arguments))}var v=function(a,b){var c=this;this.element=f(a);this.language=TEAMS.perLang||b.language||this.element.data("date-language")||"en";this.language=this.language in k?this.language:"en";this.isRTL=k[this.language].rtl||!1;this.formatType=b.formatType||this.element.data("format-type")||"standard";this.format=h.parseFormat(b.format||this.element.data("date-format")||k[this.language].format||h.getDefaultFormat(this.formatType,"input"),this.formatType);this.isVisible=this.isInline=!1;this.hideHeader=b.hideHeader||!1;this.offsetCalc=b.offsetCalc||null;this.fixModalOffset=b.fixModalOffset||!1;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar").parent():!1;this.componentReset=this.element.is(".date")?this.element.find(".add-on .icon-remove").parent():!1;this.hasInput=this.component&&this.element.find("input").length;this.component&&0===this.component.length&&(this.component=!1);this.linkField=b.linkField||this.element.data("link-field")||!1;this.linkFormat=h.parseFormat(b.linkFormat||this.element.data("link-format")||h.getDefaultFormat(this.formatType,"link"),this.formatType);this.minuteStep=b.minuteStep||this.element.data("minute-step")||5;this.pickerPosition=b.pickerPosition||this.element.data("picker-position")||"bottom-right";this.showMeridian=b.showMeridian||this.element.data("show-meridian")||!1;this.initialDate=b.initialDate||new Date;this.writeValue=b.writeValue||!1;this._attachEvents();this.formatViewType="datetime";"formatViewType"in b?this.formatViewType=b.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType"));this.minView=0;"minView"in b?this.minView=b.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view"));this.minView=h.convertViewMode(this.minView);this.maxView=h.modes.length-1;"maxView"in b?this.maxView=b.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view"));this.maxView=h.convertViewMode(this.maxView);this.wheelViewModeNavigation=!1;"wheelViewModeNavigation"in b?this.wheelViewModeNavigation=b.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation"));this.wheelViewModeNavigationInverseDirection=!1;"wheelViewModeNavigationInverseDirection"in b?this.wheelViewModeNavigationInverseDirection=b.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir"));this.wheelViewModeNavigationDelay=100;"wheelViewModeNavigationDelay"in b?this.wheelViewModeNavigationDelay=b.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay"));this.startViewMode=2;"startView"in b?this.startViewMode=b.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view"));this.viewMode=this.startViewMode=h.convertViewMode(this.startViewMode);this.viewSelect=this.minView;"viewSelect"in b?this.viewSelect=b.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select"));this.viewSelect=h.convertViewMode(this.viewSelect);this.forceParse=!0;"forceParse"in b?this.forceParse=b.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));this.picker=f(h.template).appendTo(this.isInline?this.element:"body").on({click:f.proxy(this.click,this),mousedown:f.proxy(this.mousedown,this)});if(this.wheelViewModeNavigation)if(f.fn.mousewheel)this.picker.on({mousewheel:f.proxy(this.mousewheel,this)});else console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option");this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu");this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right"));f(document).on("mousedown",function(a){0===f(a.target).closest(".datetimepicker").length&&c.hide()});this.autoclose=!1;"autoclose"in b?this.autoclose=b.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose"));this.keyboardNavigation=!0;"keyboardNavigation"in b?this.keyboardNavigation=b.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation"));this.todayBtn=b.todayBtn||this.element.data("date-today-btn")||!1;this.dateBtnGroup=b.dateBtnGroup;this.todayHighlight=b.todayHighlight||this.element.data("date-today-highlight")||!1;this.weekStart=(b.weekStart||this.element.data("date-weekstart")||k[this.language].weekStart||0)%7;this.weekEnd=(this.weekStart+6)%7;this.startDate=-Infinity;this.endDate=Infinity;this.daysOfWeekDisabled=[];this.setStartDate(b.startDate||this.element.data("date-startdate"));this.setEndDate(b.endDate||this.element.data("date-enddate"));this.setDaysOfWeekDisabled(b.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.fillDow();this.fillMonths();this.update();this.showMode();this.isInline&&this.show()};v.prototype={constructor:v,_events:[],_attachEvents:function(){this._detachEvents();this.isInput?this._events=[[this.element,{focus:f.proxy(this.show,this),keyup:f.proxy(this.update,this),keydown:f.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:f.proxy(this.show,this),keyup:f.proxy(this.update,this),keydown:f.proxy(this.keydown,this)}],[this.component,{click:f.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:f.proxy(this.reset,this)}])):this.element.is("div")||this.element.hasClass("inline")?this.isInline=!0:this._events=[[this.element,{click:f.proxy(this.show,this)}]];for(var a=0,b,c;a<this._events.length;a++)b=this._events[a][0],c=this._events[a][1],b.on(c)},_detachEvents:function(){for(var a=0,b,c;a<this._events.length;a++)b=this._events[a][0],c=this._events[a][1],b.off(c);this._events=[]},show:function(a){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.forceParse&&this.update();this.place();f(window).on("resize",f.proxy(this.place,this));a&&(a.stopPropagation(),a.preventDefault());this.isVisible=!0;this.element.trigger({type:"show",date:this.date})},hide:function(a){this.isVisible&&!this.isInline&&(this.picker.hide(),f(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||f(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date}))},remove:function(){this._detachEvents();this.picker.remove();delete this.picker;delete this.element.data().datetimepicker},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6E4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6E4*a.getTimezoneOffset()))},setUTCDate:function(a){a>=this.startDate&&a<=this.endDate?(this.date=a,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:a,startDate:this.startDate,endDate:this.endDate})},setFormat:function(a){this.format=h.parseFormat(a,this.formatType);var b;this.isInput?b=this.element:this.component&&(b=this.element.find("input"));b&&b.val()&&this.setValue()},setValue:function(){var a=this.getFormattedDate();this.isInput?this.writeValue||this.element.val(a):this.component&&!this.writeValue&&this.element.find("input").val(a);this.element.data("date",a);this.linkField&&f("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(a){void 0==a&&(a=this.format);return h.formatDate(this.date,a,this.language,this.formatType,this.forceLocal)},setStartDate:function(a){this.startDate=a||-Infinity;-Infinity!==this.startDate&&(this.startDate=h.parseDate(this.startDate,this.format,this.language,this.formatType));this.update();this.updateNavArrows()},setEndDate:function(a){this.endDate=a||Infinity;Infinity!==this.endDate&&(this.endDate=h.parseDate(this.endDate,this.format,this.language,this.formatType));this.update();this.updateNavArrows()},setDateBtnGroup:function(a){this.dateBtnGroup=a;this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this.daysOfWeekDisabled=a||[];f.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/));this.daysOfWeekDisabled=f.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)});this.update();this.updateNavArrows()},place:function(){if(!this.isInline){var a=parseInt(this.element.parents().filter(function(){return"auto"!=f(this).css("z-index")}).first().css("z-index"))+1051,b,c,d;if(this.component){if(b=this.component.offset(),d=b.left,"bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)d+=this.component.outerWidth()-this.picker.outerWidth()}else if(b=this.element.offset(),d=b.left,"bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)d-=this.picker.outerWidth()-50;if(c="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?b.top-this.picker.outerHeight():b.top+this.height){var e="left";-1!=this.pickerPosition.indexOf("right")&&(e="right");c+this.picker.outerWidth()>f(window).height()?(c=b.top-this.picker.outerHeight()-this.height,this.picker.removeClass("datetimepicker-dropdown-"+this.pickerPosition),this.pickerPosition="top-"+e,this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition)):0>c&&(c=b.top+this.height,this.picker.removeClass("datetimepicker-dropdown-"+this.pickerPosition),this.pickerPosition="bottom-"+e,this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition))}this.fixModalOffset?(b=this.element.parents(".modal-dialog").offset(),d-=b.left,c-=b.top):this.offsetCalc&&(this.offsetCalc.left&&(d-=this.offsetCalc.left),this.offsetCalc.top&&(c-=this.offsetCalc.top));this.picker.css({top:c,left:d,zIndex:a})}},update:function(){var a,b=!1;arguments&&arguments.length&&("string"===typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):a=this.element.data("date")||(this.isInput?this.element.val():this.element.find("input").val())||this.initialDate;a||(a=new Date,b=!1);this.date=h.parseDate(a,this.format,this.language,this.formatType);b&&this.setValue();this.viewDate=this.date<this.startDate?new Date(this.startDate):this.date>this.endDate?new Date(this.endDate):new Date(this.date);this.fill()},fillDow:function(){for(var a=this.weekStart,b="\x3ctr\x3e";a<this.weekStart+7;)b+='\x3cth class\x3d"dow"\x3e'+k[this.language].daysMin[a++%7]+"\x3c/th\x3e";b+="\x3c/tr\x3e";this.picker.find(".datetimepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='\x3cspan class\x3d"month"\x3e'+k[this.language].monthsShort[b++]+"\x3c/span\x3e";this.picker.find(".datetimepicker-months td").html(a)},fill:function(){if(null!=this.date&&null!=this.viewDate){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth(),d=a.getUTCDate(),e=a.getUTCHours(),q=a.getUTCMinutes(),a=-Infinity!==this.startDate?this.startDate.getUTCFullYear():-Infinity,w=-Infinity!==this.startDate?this.startDate.getUTCMonth():-Infinity,x=Infinity!==this.endDate?this.endDate.getUTCFullYear():Infinity,u=Infinity!==this.endDate?this.endDate.getUTCMonth():Infinity,n=(new r(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate())).valueOf(),m=new Date;this.picker.find(".datetimepicker-days thead th:eq(1)").text(k[this.language].months[c]+" "+b);if("time"==this.formatViewType){var l=e%12?e%12:12,l=(10>l?"0":"")+l,g=(10>q?"0":"")+q,p=k[this.language].meridiem[12>e?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(l+":"+g+" "+p.toUpperCase());this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(l+":"+g+" "+p.toUpperCase())}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(d+" "+k[this.language].months[c]+" "+b),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(d+" "+k[this.language].months[c]+" "+b);this.picker.find("tfoot th.dategroup").html('\x3cdiv class\x3d"today hide"\x3e'+k[this.language].today+'\x3c/div\x3e\x3cdiv class\x3d"tomorrow hide"\x3e'+k[this.language].tomorrow+'\x3c/div\x3e\x3cdiv class\x3d"upcoming hide"\x3e'+k[this.language].upcoming+'\x3c/div\x3e\x3cdiv class\x3d"someday hide"\x3e'+k[this.language].nodate+"\x3c/div\x3e").toggle(!1!==this.todayBtn);l=this.picker.find("tfoot th.dategroup").children();if(this.dateBtnGroup&&f.isArray(this.dateBtnGroup)){for(g=0;g<this.dateBtnGroup.length;g++)this.picker.find("tfoot th.dategroup ."+this.dateBtnGroup[g]).removeClass("hide");l.css("width",(100/this.dateBtnGroup.length).toFixed(2)+"%")}else this.picker.find("tfoot th.dategroup \x3e div").removeClass("hide"),l.css("width","25%");this.updateNavArrows();this.fillMonths();g=r(b,c-1,28,0,0,0,0);l=h.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(l);g.setUTCDate(l-(g.getUTCDay()-this.weekStart+7)%7);var t=new Date(g);t.setUTCDate(t.getUTCDate()+42);t=t.valueOf();for(l=[];g.valueOf()<t;){g.getUTCDay()==this.weekStart&&l.push("\x3ctr\x3e");p="";if(g.getUTCFullYear()<b||g.getUTCFullYear()==b&&g.getUTCMonth()<c)p+=" old";else if(g.getUTCFullYear()>b||g.getUTCFullYear()==b&&g.getUTCMonth()>c)p+=" new";this.todayHighlight&&g.getUTCFullYear()==m.getFullYear()&&g.getUTCMonth()==m.getMonth()&&g.getUTCDate()==m.getDate()&&(p+=" today");g.valueOf()==n&&(p+=" active");if(g.valueOf()+864E5<=this.startDate||g.valueOf()>this.endDate||-1!==f.inArray(g.getUTCDay(),this.daysOfWeekDisabled))p+=" disabled";l.push('\x3ctd class\x3d"day'+p+'"\x3e'+g.getUTCDate()+"\x3c/td\x3e");g.getUTCDay()==this.weekEnd&&l.push("\x3c/tr\x3e");g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datetimepicker-days tbody").empty().append(l.join(""));l=[];n="";for(g=0;24>g;g++){m=r(b,c,d,g);p="";t=" halfhour";if(m.valueOf()<=this.startDate||m.valueOf()>=this.endDate)p+=" disabled";if(m.valueOf()+18E5<=this.startDate||m.valueOf()+18E5>=this.endDate)t+=" disabled";e==g&&(p+=" active");!g%3&&l.push('\x3cfieldset class\x3d"hour"\x3e\x3clegend\x3e'+n.toUpperCase()+"\x3c/legend\x3e");m=g;l.push('\x3cspan class\x3d"hour'+p+" hour_"+(12>g?"am":"pm")+'" style\x3d"font-size:12px;font-weight: bold;" hour\x3d"'+m+'" minute\x3d"0"\x3e'+m+"\x3c/span\x3e");l.push('\x3cspan class\x3d"hour'+t+" hour_"+(12>g?"am":"pm")+'" hour\x3d"'+m+'" minute\x3d"30"\x3e'+m+":30\x3c/span\x3e");!(g+1)%3&&l.push("\x3c/fieldset\x3e")}this.picker.find(".datetimepicker-hours td").html(l.join(""));l=[];t="";for(g=0;60>g;g+=this.minuteStep)m=r(b,c,d,e,g,0),p="",m.valueOf()<this.startDate||m.valueOf()>this.endDate?p+=" disabled":Math.floor(q/this.minuteStep)==Math.floor(g/this.minuteStep)&&(p+=" active"),this.showMeridian&&2==k[this.language].meridiem.length?(n=12>e?k[this.language].meridiem[0]:k[this.language].meridiem[1],n!=t&&(""!=t&&l.push("\x3c/fieldset\x3e"),l.push('\x3cfieldset class\x3d"minute"\x3e\x3clegend\x3e'+n.toUpperCase()+"\x3c/legend\x3e")),t=n,m=e%12?e%12:12,l.push('\x3cspan class\x3d"minute'+p+'"\x3e'+m+":"+(10>g?"0"+g:g)+"\x3c/span\x3e"),59==g&&l.push("\x3c/fieldset\x3e")):l.push('\x3cspan class\x3d"minute'+p+'"\x3e'+e+":"+(10>g?"0"+g:g)+"\x3c/span\x3e");this.picker.find(".datetimepicker-minutes td").html(l.join(""));c=this.date.getUTCFullYear();d=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(b).end().find("span").removeClass("active");c==b&&d.eq(this.date.getUTCMonth()).addClass("active");(b<a||b>x)&&d.addClass("disabled");b==a&&d.slice(0,w).addClass("disabled");b==x&&d.slice(u+1).addClass("disabled");l="";b=10*parseInt(b/10,10);w=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");--b;for(g=-1;11>g;g++)l+='\x3cspan class\x3d"year'+(-1==g||10==g?" old":"")+(c==b?" active":"")+(b<a||b>x?" disabled":"")+'"\x3e'+b+"\x3c/span\x3e",b+=1;w.html(l);this.hideHeader&&this.picker.find("thead").addClass("hide");this.place();f(".datetimepicker.dropdown-menu");this.isInline&&f(".datetimepicker.datetimepicker-inline")}},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth(),d=a.getUTCDate(),a=a.getUTCHours();switch(this.viewMode){case 0:-Infinity!==this.startDate&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()&&a<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});Infinity!==this.endDate&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()&&a>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:-Infinity!==this.startDate&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});Infinity!==this.endDate&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:-Infinity!==this.startDate&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});Infinity!==this.endDate&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:-Infinity!==this.startDate&&b<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),Infinity!==this.endDate&&b>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(a){a.preventDefault();a.stopPropagation();this.wheelPause||(this.wheelPause=!0,a=a.originalEvent.wheelDelta,a=0<a?1:0===a?0:-1,this.wheelViewModeNavigationInverseDirection&&(a=-a),this.showMode(a),setTimeout(f.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay))},click:function(a){a.stopPropagation();a.preventDefault();this.forceLocal=null;var b=f(a.target).closest("span, td, th, legend");if(1==b.length)if(b.is(".disabled"))this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});else switch(b[0].nodeName.toLowerCase()){case "th":switch(b[0].className){case "switch":this.showMode(1);break;case "prev":case "next":b=h.modes[this.viewMode].navStep*("prev"==b[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,b);break;case 1:this.viewDate=this.moveDate(this.viewDate,b);break;case 2:this.viewDate=this.moveMonth(this.viewDate,b);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,b)}this.fill();break;case "today":b=new Date;b=r(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds(),0);this.viewMode=this.startViewMode;this.showMode(0);this._setDate(b);this.fill();this.autoclose&&this.hide();break;case "dategroup":switch(a=f(a.target).attr("class"),b=Date.create(TEAMS.nowTime),this.forceLocal=!0,a){case "today":this.viewMode=this.startViewMode;this.showMode(0);this._setDate(b);this.fill();this.autoclose&&this.hide();break;case "tomorrow":b.addDays(1);this.viewMode=this.startViewMode;this.showMode(0);this._setDate(b);this.fill();this.autoclose&&this.hide();break;case "upcoming":b.addDays(7);this.viewMode=this.startViewMode;this.showMode(0);this._setDate(b);this.fill();this.autoclose&&this.hide();break;case "someday":this.viewMode=this.startViewMode,this.showMode(0),this._setDate(null),this.fill(),this.autoclose&&this.hide()}}break;case "span":if(!b.is(".disabled")){a=this.viewDate.getUTCFullYear();var c=this.viewDate.getUTCMonth(),d=this.viewDate.getUTCDate(),e=this.viewDate.getUTCHours(),q=this.viewDate.getUTCMinutes(),k=this.viewDate.getUTCSeconds();b.is(".month")?(this.viewDate.setUTCDate(1),c=b.parent().find("span").index(b),d=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(c),this.element.trigger({type:"changeMonth",date:this.viewDate}),3<=this.viewSelect&&this._setDate(r(a,c,d,e,q,k,0))):b.is(".year")?(this.viewDate.setUTCDate(1),a=parseInt(b.text(),10)||0,this.viewDate.setUTCFullYear(a),this.element.trigger({type:"changeYear",date:this.viewDate}),4<=this.viewSelect&&this._setDate(r(a,c,d,e,q,k,0))):b.is(".hour")?(e=parseInt(b.attr("hour"))||0,q=parseInt(b.attr("minute"))||0,this.viewDate.setUTCHours(e),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewDate.setUTCMinutes(q),this.element.trigger({type:"changeMinute",date:this.viewDate}),1<=this.viewSelect&&this._setDate(r(a,c,d,e,q,k,0))):b.is(".minute")&&(q=parseInt(b.text().substr(b.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(q),this.element.trigger({type:"changeMinute",date:this.viewDate}),0<=this.viewSelect&&this._setDate(r(a,c,d,e,q,k,0)));0!=this.viewMode?(b=this.viewMode,this.showMode(-1),this.fill(),b==this.viewMode&&this.autoclose&&this.hide()):(this.fill(),this.autoclose&&this.hide())}break;case "td":b.is(".day")&&!b.is(".disabled")&&(d=parseInt(b.text(),10)||1,a=this.viewDate.getUTCFullYear(),c=this.viewDate.getUTCMonth(),e=this.viewDate.getUTCHours(),q=this.viewDate.getUTCMinutes(),k=this.viewDate.getUTCSeconds(),b.is(".old")?0===c?(c=11,--a):--c:b.is(".new")&&(11==c?(c=0,a+=1):c+=1),this.viewDate.setUTCFullYear(a),this.viewDate.setUTCMonth(c),this.viewDate.setUTCDate(d),this.element.trigger({type:"changeDay",date:this.viewDate}),2<=this.viewSelect&&this._setDate(r(a,c,d,e,q,k,0))),b=this.viewMode,this.showMode(-1),this.fill(),b==this.viewMode&&this.autoclose&&this.hide()}},_setDate:function(a,b){b&&"date"!=b||(this.date=a);b&&"view"!=b||(this.viewDate=a);this.fill();this.setValue();var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input"));c&&c.change();this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(a,b){if(!b)return a;var c=new Date(a.valueOf());c.setUTCMinutes(c.getUTCMinutes()+b*this.minuteStep);return c},moveHour:function(a,b){if(!b)return a;var c=new Date(a.valueOf());c.setUTCHours(c.getUTCHours()+b);return c},moveDate:function(a,b){if(!b)return a;var c=new Date(a.valueOf());c.setUTCDate(c.getUTCDate()+b);return c},moveMonth:function(a,b){if(!b)return a;var c=new Date(a.valueOf()),d=c.getUTCDate(),e=c.getUTCMonth(),f=Math.abs(b),k;b=0<b?1:-1;if(1==f){if(f=-1==b?function(){return c.getUTCMonth()==e}:function(){return c.getUTCMonth()!=k},k=e+b,c.setUTCMonth(k),0>k||11<k)k=(k+12)%12}else{for(var h=0;h<f;h++)c=this.moveMonth(c,b);k=c.getUTCMonth();c.setUTCDate(d);f=function(){return k!=c.getUTCMonth()}}for(;f();)c.setUTCDate(--d),c.setUTCMonth(k);return c},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))27==a.keyCode&&this.show();else{var b=!1,c,d,e;switch(a.keyCode){case 27:this.hide();a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;c=37==a.keyCode?-1:1;viewMode=this.viewMode;a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1);4==viewMode?(d=this.moveYear(this.date,c),e=this.moveYear(this.viewDate,c)):3==viewMode?(d=this.moveMonth(this.date,c),e=this.moveMonth(this.viewDate,c)):2==viewMode?(d=this.moveDate(this.date,c),e=this.moveDate(this.viewDate,c)):1==viewMode?(d=this.moveHour(this.date,c),e=this.moveHour(this.viewDate,c)):0==viewMode&&(d=this.moveMinute(this.date,c),e=this.moveMinute(this.viewDate,c));this.dateWithinRange(d)&&(this.date=d,this.viewDate=e,this.setValue(),this.update(),a.preventDefault(),b=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;c=38==a.keyCode?-1:1;viewMode=this.viewMode;a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1);4==viewMode?(d=this.moveYear(this.date,c),e=this.moveYear(this.viewDate,c)):3==viewMode?(d=this.moveMonth(this.date,c),e=this.moveMonth(this.viewDate,c)):2==viewMode?(d=this.moveDate(this.date,7*c),e=this.moveDate(this.viewDate,7*c)):1==viewMode?this.showMeridian?(d=this.moveHour(this.date,6*c),e=this.moveHour(this.viewDate,6*c)):(d=this.moveHour(this.date,4*c),e=this.moveHour(this.viewDate,4*c)):0==viewMode&&(d=this.moveMinute(this.date,4*c),e=this.moveMinute(this.viewDate,4*c));this.dateWithinRange(d)&&(this.date=d,this.viewDate=e,this.setValue(),this.update(),a.preventDefault(),b=!0);break;case 13:0!=this.viewMode?(c=this.viewMode,this.showMode(-1),this.fill(),c==this.viewMode&&this.autoclose&&this.hide()):(this.fill(),this.autoclose&&this.hide());a.preventDefault();break;case 9:this.hide()}if(b){var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input"));f&&f.change();this.element.trigger({type:"changeDate",date:this.date})}}},showMode:function(a){a&&(a=Math.max(0,Math.min(h.modes.length-1,this.viewMode+a)),a>=this.minView&&a<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:a}),this.viewMode=a));this.picker.find("\x3ediv").hide().filter(".datetimepicker-"+h.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()},reset:function(a){this._setDate(null,"date")}};f.fn.datetimepicker=function(a){var b=Array.apply(null,arguments);b.shift();return this.each(function(){var c=f(this),d=c.data("datetimepicker"),e="object"==typeof a&&a;d||c.data("datetimepicker",d=new v(this,f.extend({},f.fn.datetimepicker.defaults,e)));"string"==typeof a&&"function"==typeof d[a]&&d[a].apply(d,b)})};f.fn.datetimepicker.defaults={};f.fn.datetimepicker.Constructor=v;var k=f.fn.datetimepicker.dates={en:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysMin:"Su Mo Tu We Th Fr Sa Su".split(" "),months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today",tomorrow:"Tmr",upcoming:"Coming",nodate:"Clear"}},h={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return 0===a%4&&0!==a%100||0===a%400},getDaysInMonth:function(a,b){return[31,h.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},getDefaultFormat:function(a,b){if("standard"==a)return"input"==b?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==a)return"input"==b?"Y-m-d H:i":"Y-m-d H:i:s";throw Error("Invalid format type.");},validParts:function(a){if("standard"==a)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==a)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw Error("Invalid format type.");},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(a,b){var c=a.replace(this.validParts(b),"\x00").split("\x00"),d=a.match(this.validParts(b));if(!c||!c.length||!d||0==d.length)throw Error("Invalid date format.");return{separators:c,parts:d}},parseDate:function(a,b,c,d){if(a instanceof Date)return a;/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(a)&&(b=this.parseFormat("yyyy-mm-dd",d));/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(a)&&(b=this.parseFormat("yyyy-mm-dd hh:ii",d));/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(a)&&(b=this.parseFormat("yyyy-mm-dd hh:ii:ss",d));if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(a)){b=/([-+]\d+)([dmwy])/;var e=a.match(/([-+]\d+)([dmwy])/g);a=new Date;for(var h=0;h<e.length;h++)switch(d=b.exec(e[h]),c=parseInt(d[1]),d[2]){case "d":a.setUTCDate(a.getUTCDate()+c);break;case "m":a=v.prototype.moveMonth.call(v.prototype,a,c);break;case "w":a.setUTCDate(a.getUTCDate()+7*c);break;case "y":a=v.prototype.moveYear.call(v.prototype,a,c)}return r(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),0)}e=a&&a.match(this.nonpunctuation)||[];a=new Date(0,0,0,0,0,0,0);var w={},x="hh h ii i ss s yyyy yy M MM m mm D DD d dd H HH p P".split(" "),u={hh:function(a,b){return a.setUTCHours(b)},h:function(a,b){return a.setUTCHours(b)},HH:function(a,b){return a.setUTCHours(12==b?0:b)},H:function(a,b){return a.setUTCHours(12==b?0:b)},ii:function(a,b){return a.setUTCMinutes(b)},i:function(a,b){return a.setUTCMinutes(b)},ss:function(a,b){return a.setUTCSeconds(b)},s:function(a,b){return a.setUTCSeconds(b)},yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2E3+b)},m:function(a,b){for(--b;0>b;)b+=12;b%=12;for(a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)},p:function(a,b){return a.setUTCHours(1==b?a.getUTCHours()+12:a.getUTCHours())}},n;u.M=u.MM=u.mm=u.m;u.dd=u.d;u.P=u.p;a=r(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds());if(e.length==b.parts.length){for(var h=0,m=b.parts.length;h<m;h++){n=parseInt(e[h],10);d=b.parts[h];if(isNaN(n))switch(d){case "MM":n=f(k[c].months).filter(function(){var a=this.slice(0,e[h].length),b=e[h].slice(0,a.length);return a==b});n=f.inArray(n[0],k[c].months)+1;break;case "M":n=f(k[c].monthsShort).filter(function(){var a=this.slice(0,e[h].length),b=e[h].slice(0,a.length);return a==b});n=f.inArray(n[0],k[c].monthsShort)+1;break;case "p":case "P":n=f.inArray(e[h].toLowerCase(),k[c].meridiem)}w[d]=n}for(h=0;h<x.length;h++)if(d=x[h],d in w&&!isNaN(w[d]))u[d](a,w[d])}return a},formatDate:function(a,b,c,d,e){if(null==a)return"";if("standard"==d)c={yy:a[e?"getFullYear":"getUTCFullYear"]().toString().substring(2),yyyy:a[e?"getFullYear":"getUTCFullYear"](),m:a[e?"getMonth":"getUTCMonth"]()+1,M:k[c].monthsShort[a[e?"getMonth":"getUTCMonth"]()],MM:k[c].months[a[e?"getMonth":"getUTCMonth"]()],d:a[e?"getDate":"getUTCDate"](),D:k[c].daysShort[a[e?"getDay":"getUTCDay"]()],DD:k[c].days[a[e?"getDay":"getUTCDay"]()],p:2==k[c].meridiem.length?k[c].meridiem[12>a[e?"getHours":"getUTCHours"]()?0:1]:"",h:a[e?"getHours":"getUTCHours"](),i:a[e?"getMinutes":"getUTCMinutes"](),s:a[e?"getSeconds":"getUTCSeconds"]()},c.H=0==c.h%12?12:c.h%12,c.HH=(10>c.H?"0":"")+c.H,c.P=c.p.toUpperCase(),c.hh=(10>c.h?"0":"")+c.h,c.ii=(10>c.i?"0":"")+c.i,c.ss=(10>c.s?"0":"")+c.s,c.dd=(10>c.d?"0":"")+c.d,c.mm=(10>c.m?"0":"")+c.m;else if("php"==d)c={y:a.getUTCFullYear().toString().substring(2),Y:a.getUTCFullYear(),F:k[c].months[a.getUTCMonth()],M:k[c].monthsShort[a.getUTCMonth()],n:a.getUTCMonth()+1,t:h.getDaysInMonth(a.getUTCFullYear(),a.getUTCMonth()),j:a.getUTCDate(),l:k[c].days[a.getUTCDay()],D:k[c].daysShort[a.getUTCDay()],w:a.getUTCDay(),N:0==a.getUTCDay()?7:a.getUTCDay(),S:a.getUTCDate()%10<=k[c].suffix.length?k[c].suffix[a.getUTCDate()%10-1]:"",a:2==k[c].meridiem.length?k[c].meridiem[12>a.getUTCHours()?0:1]:"",g:0==a.getUTCHours()%12?12:a.getUTCHours()%12,G:a.getUTCHours(),i:a.getUTCMinutes(),s:a.getUTCSeconds()},c.m=(10>c.n?"0":"")+c.n,c.d=(10>c.j?"0":"")+c.j,c.A=c.a.toString().toUpperCase(),c.h=(10>c.g?"0":"")+c.g,c.H=(10>c.G?"0":"")+c.G,c.i=(10>c.i?"0":"")+c.i,c.s=(10>c.s?"0":"")+c.s;else throw Error("Invalid format type.");a=[];d=f.extend([],b.separators);e=0;for(var q=b.parts.length;e<q;e++)d.length&&a.push(d.shift()),a.push(c[b.parts[e]]);return a.join("")},convertViewMode:function(a){switch(a){case 4:case "decade":a=4;break;case 3:case "year":a=3;break;case 2:case "month":a=2;break;case 1:case "day":a=1;break;case 0:case "hour":a=0}return a},headTemplate:'\x3cthead\x3e\x3ctr\x3e\x3cth class\x3d"prev"\x3e\x3ci class\x3d"icon-arrow-left"/\x3e\x3c/th\x3e\x3cth colspan\x3d"5" class\x3d"switch"\x3e\x3c/th\x3e\x3cth class\x3d"next"\x3e\x3ci class\x3d"icon-arrow-right"/\x3e\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e',contTemplate:'\x3ctbody\x3e\x3ctr\x3e\x3ctd colspan\x3d"7"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e',footTemplate:'\x3ctfoot\x3e\x3ctr\x3e\x3cth colspan\x3d"7" class\x3d"dategroup"\x3e\x3c/th\x3e\x3c/tr\x3e\x3c/tfoot\x3e'};h.template='\x3cdiv class\x3d"datetimepicker"\x3e\x3cdiv class\x3d"datetimepicker-minutes"\x3e\x3ctable class\x3d" table-condensed"\x3e'+h.headTemplate+h.contTemplate+h.footTemplate+'\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"datetimepicker-hours"\x3e\x3ctable class\x3d" table-condensed"\x3e'+h.headTemplate+h.contTemplate+h.footTemplate+'\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"datetimepicker-days"\x3e\x3ctable class\x3d" table-condensed"\x3e'+h.headTemplate+"\x3ctbody\x3e\x3c/tbody\x3e"+h.footTemplate+'\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"datetimepicker-months"\x3e\x3ctable class\x3d"table-condensed"\x3e'+h.headTemplate+h.contTemplate+h.footTemplate+'\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d"datetimepicker-years"\x3e\x3ctable class\x3d"table-condensed"\x3e'+h.headTemplate+h.contTemplate+h.footTemplate+"\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e";f.fn.datetimepicker.DPGlobal=h;f.fn.datetimepicker.noConflict=function(){f.fn.datetimepicker=old;return this};f(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide\x3d"datetimepicker"]',function(a){var b=f(this);b.data("datetimepicker")||(a.preventDefault(),b.datetimepicker("show"))});f(function(){f('[data-provide\x3d"datetimepicker-inline"]').datetimepicker()})}(window.jQuery);(function(f){f.fn.datetimepicker.dates.zh_CN={days:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d \u661f\u671f\u65e5".split(" "),daysShort:"\u5468\u65e5 \u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d \u5468\u65e5".split(" "),daysMin:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5".split(""),months:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),monthsShort:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),today:"\u4eca\u5929",tomorrow:"\u660e\u5929",upcoming:"\u5373\u5c06",nodate:"\u65e0\u65e5\u671f",suffix:[],meridiem:["\u4e0a\u5348","\u4e0b\u5348"]};f.fn.datetimepicker.dates.zh_TW={days:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d \u661f\u671f\u65e5".split(" "),daysShort:"\u9031\u65e5 \u9031\u4e00 \u9031\u4e8c \u9031\u4e09 \u9031\u56db \u9031\u4e94 \u9031\u516d \u9031\u65e5".split(" "),daysMin:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5".split(""),months:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),monthsShort:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),today:"\u4eca\u5929",tomorrow:"\u660e\u5929",upcoming:"\u5373\u5c07",nodate:"\u7121\u65e5\u671f",suffix:[],meridiem:["\u4e0a\u5348","\u4e0b\u5348"]}})(jQuery);