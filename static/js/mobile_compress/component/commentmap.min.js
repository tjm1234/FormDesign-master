define(function(c, f, g) {
    f = Backbone.View.extend({
        initialize: function(a) {
            this.lng = a.lng;
            this.lat = a.lat;
            this.addr = a.addr;
            this.time = a.time;
            this.targetId = a.targetId;
            this.el = "body"
        },
        bindDelegateEvents: function() {
            $(this.el)
        },
        render: function() {
            var a = this;
            $("#loading").show();
            c.async("teamstpl/component/commentmap" + seatplClip, function(b) {
                $(a.el).html(utils.template(b));
                window.HOST_TYPE = "2";
                window.BMap_loadScriptTime = (new Date).getTime();
                b = -1 != TEAMS.service.base.toLowerCase().indexOf("https://") ? "https://" : "http://";
                c.async([b + "api.map.baidu.com/getscript?v\x3d2.0\x26ak\x3d5QlDX8l9izc0mHeDEsRQe1mIEGjs9nE9\x26services\x3d\x26t\x3d" + TEAMS.version], function() {
                    $(a.el).find(".j_aroundAddrList").addClass("hide");
                    map = new BMap.Map("commentmap");
                    new BMap.Geocoder;
                    var b = new BMap.Point(a.lng,a.lat);
                    map.centerAndZoom(b, 15);
                    map.enableDragging();
                    a.addMarker(map, b, a.addr, !0);
                    $("#loading").hide()
                })
            })
        },
        addMarker: function(a, b, d, c) {
            var e = new BMap.Marker(b);
            d = new BMap.InfoWindow(d,{
                offset: new BMap.Size(-4,-14),
                enableCloseOnClick: !1
            });
            e.infoWindow = d;
            e.point = b;
            e.addEventListener("click", function(b) {
                a.openInfoWindow(b.target.infoWindow, b.target.point);
                b.target.infoWindow.getContent()
            });
            c && a.openInfoWindow(d, b);
            a.addOverlay(e);
            $("#loading").hide()
        },
        remove: function() {
            $(this.el).off(".commentmap")
        }
    });
    g.exports = f
});
