define(function(c, b, e) {
    b = Backbone.View.extend({
        initialize: function(a) {
            var d = this;
            a.callback = this.callback;
            this.options = a;
            window.renderMobileForm = function() {
                d.render(this.options)
            }
        },
        delegateEvents: function() {},
        bindDelegateEvents: function() {
            var a = this;
            $(document).off("tap.ebgforminfo", ".js_eform_copy").on("tap.ebgforminfo", ".js_eform_copy", function() {
                ROUTER.navigate("/mobile/ebgforms/" + a.options.module + "/" + a.options.formId + "/copy", {
                    trigger: !0
                })
            });
            $(document).off("tap.ebgforminfo", ".js_eform_back").on("tap.ebgforminfo", ".js_eform_back", function() {
                window.history.back()
            });
            $("#fdbk").on("click.ebgforminfo", function(a) {
                $(document).find("#comt-input").trigger("tap")
            })
        },
        render: function() {
            var a = this;
            c.async([_formDesign+"/static/mobiletpl_compress/component/ebgformdetail" + seatplClip, "mobile_compress/component/comment" + seajsClip, "mobile_compress/form/formview" + seajsClip], function(d, b, c) {
                $("body").html(utils.template(d));
                a.commentview = new b({
                    targetId: a.options.formId,
                    module: "ebgform",
                    parentEl: ".view-con"
                });
                a.commentview.render();
                a.options.parentEl = $("body").find(".js_ebgformdetailcontainer");
                a.bindDelegateEvents();
                if(!window.parent.m_layoutDetail && window.localStorage) window.parent.m_layoutDetail = window.localStorage.getItem('m_layoutDetail')
                "mobileform" == a.options.formId && (a.options.layoutDetail = window.parent.m_layoutDetail,
                $(".js_ebgformdetailbottom").remove(),
                $(".js_ebgformdetailcontainer").css("margin", 0));
                window.parent.m_formpreview && $(".js_ebgformdetailbottom").remove();
                (new c).renderForm(a.options)
            })
        },
        callback: function(a) {
        	if(!window.parent.m_layoutTitle && window.localStorage) window.parent.m_layoutTitle = window.localStorage.getItem('m_layoutTitle')
            window.parent.m_layoutTitle ? $(document).find(".js_ebgformdetailhead\x3ediv").html(window.parent.m_layoutTitle) : $(document).find(".js_ebgformdetailhead\x3ediv").html(a.form.name)
        },
        remove: function() {
            $(document).off(".ebgforminfo");
            window.renderMobileForm = null
        }
    });
    e.exports = b
});
